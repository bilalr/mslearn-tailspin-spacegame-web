#!/bin/bash

# Install Node.js moudles as defiend in package.json.
npm install --quiet

# Compile Sass (.scss) files to standar CSS (.css).
node-sass Tailspin.SpaceGame.Web/wwwroot

#Minify JavaScript and CSS files.
gulp

#Print the date to wwwroot/buildinfo.txt
echo ´date´ > Tailspin.SpaceGame.Web/wwwroot/buildinfo.txt

#install the latest .Net packages the app depends on. 

dotnet restore

#Build the app under the Debug configuration.
dotnet build --configuration Debug

#Publish the build to the /tmp directory.
dotnet publish --no-build --configuration Debug --output /tmp/Debug

#Build the app under the Release configuration.
dotnet build --confgiuration Release

#Pulish the build to the /tmp directory. 
dotnet publish --no-build --configuration Release --output /tmp/Release


